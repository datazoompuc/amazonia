<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>DataZoom</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --green:#2f7d32;
      --green-soft:#77C478;
      --border:#e6e6e6;
      --black:#111;
      --nav-h: 64px; /* altura real do header (ajustada via JS) */
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{color:inherit;text-decoration:none}

    /* ---------- HEADER BAR ---------- */
    .navbar{
      display:flex;align-items:center;justify-content:space-between;
      background:#fff; padding:8px 10px; /* menos padding ‚Üí itens mais nas bordas */
      position:relative;
      border-bottom:4px solid var(--green-soft);
    }
    .nav-left{display:flex;align-items:center}
    .logo-btn{border:0;background:transparent;padding:0;cursor:pointer;margin-left:2px}
    .logo-img{height:48px;display:block}

    .nav-right{display:flex;align-items:center}
    .nav-action{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:6px 10px}
    .divider{width:1px;height:24px;background:#d1d5db}
    .lang-link{color:var(--green);font-weight:600}

    /* Hamburger */
    .menu-toggle{
      border:0;background:transparent;cursor:pointer;padding:0;
      display:flex;flex-direction:column;align-items:center
    }
    .bars{width:26px}
    .bar{height:3px;background:var(--green-soft);border-radius:2px;margin:4px 0}
    .menu-label{font-size:12px;color:#555;margin-top:3px}

    /* ---------- MENU: DRAWER LATERAL DIREITO (menu inteiro) ---------- */
    nav{background:#fff}
    .menu{
      list-style:none;margin:0;padding:0;display:none;
      position:fixed; right:0; top:var(--nav-h);
      width:min(88vw, 360px); height:calc(100vh - var(--nav-h));
      background:#fff; border-left:1px solid var(--border);
      box-shadow:-8px 0 16px rgba(0,0,0,.06);
      overflow:auto; z-index:999;
    }
    .menu.show{display:block}
    .menu li{border-bottom:1px solid var(--border)}
    .menu a,.menu button.menu-link{
      width:100%;display:flex;align-items:center;justify-content:space-between;
      padding:14px 18px;font-weight:700;color:var(--green);background:#fff;border:0;cursor:pointer;text-align:left;
      appearance:none;-webkit-appearance:none; /* evita setas nativas */
    }
    .menu a:hover,.menu button.menu-link:hover{background:#f7faf7}

    /* √öNICA seta controlada: */
    .caret{transition:transform .2s ease}
    .menu .open .caret{transform:rotate(180deg)}

    .submenu{list-style:none;margin:0;padding:0;display:none}
    .submenu.show{display:block}
    .submenu li a{font-weight:600;color:#111;padding:14px 28px}
  </style>
</head>
<body>

  <!-- ======= HEADER ======= -->
  <header class="navbar" id="site-header">
    <div class="nav-left">
      <!-- Logo: back to home -->
      <button class="logo-btn" id="logo-home" aria-label="Voltar para a p√°gina principal">
        <img class="logo-img" src="{{ site.baseurl }}/assets/img/banner_dzam.png" alt="DataZoom Amaz√¥nia">
      </button>
    </div>

    <div class="nav-right">
      <div class="nav-action">
        <a href="#" id="lang-switch" class="lang-link">English</a>
      </div>
      <div class="divider" aria-hidden="true"></div>

      <div class="nav-action">
        <button class="menu-toggle" id="menu-toggle" aria-expanded="false" aria-controls="site-menu">
          <div class="bars" aria-hidden="true">
            <div class="bar"></div><div class="bar"></div><div class="bar"></div>
          </div>
          <span class="menu-label">Menu</span>
        </button>
      </div>
      <!-- üîª lupa removida -->
    </div>
  </header>

  <!-- ======= MENU (drawer √† direita) ======= -->
  <nav aria-label="Menu principal">
    <ul class="menu" id="site-menu">
      <li><a href="{{ site.baseurl }}">P√°gina Principal</a></li>

      <!-- Accordion: Visualiza√ß√µes (apenas UMA seta) -->
      <li>
        <button class="menu-link" id="viz-toggle" aria-expanded="false" aria-controls="viz-submenu">
          <span>Visualiza√ß√µes</span>
          <span class="caret">‚ñæ</span>
        </button>
        <ul class="submenu" id="viz-submenu">
          <li><a href="{{ site.baseurl }}/pt/visualizacoes/comercio-exterior/">Com√©rcio exterior</a></li>
          <li><a href="{{ site.baseurl }}/pt/visualizacoes/desenvolvimento/">Desenvolvimento</a></li>
          <li><a href="{{ site.baseurl }}/pt/visualizacoes/desmatamento/">Desmatamento</a></li>
          <li><a href="{{ site.baseurl }}/pt/visualizacoes/energia/">Energia</a></li>
          <li><a href="{{ site.baseurl }}/pt/visualizacoes/mercado-trabalho/">Mercado de Trabalho</a></li>
          <li><a href="{{ site.baseurl }}/pt/visualizacoes/saude/">Sa√∫de</a></li>
        </ul>
      </li>

      <li><a href="{{ site.baseurl }}/pt/codigos-e-dados/">C√≥digos e Dados</a></li>
      <li><a href="{{ site.baseurl }}/pt/sobre/">Sobre</a></li>
      <li><a href="https://www.econ.puc-rio.br/datazoom/">Data Zoom</a></li>
      <li><a href="https://amazonia2030.org.br/">Amaz√¥nia 2030</a></li>
      <li><a href="{{ site.baseurl }}/pt/termos/">Termos de Uso</a></li>
    </ul>
  </nav>

  <script>
    // mede a altura real do header para posicionar o drawer
    (function(){
      const hdr=document.getElementById('site-header');
      if(hdr){
        const setH=()=>document.documentElement.style.setProperty('--nav-h', hdr.getBoundingClientRect().height+'px');
        setH();
        window.addEventListener('resize', setH);
      }
    })();

    // toggle drawer
    const toggleBtn=document.getElementById('menu-toggle');
    const menu=document.getElementById('site-menu');
    toggleBtn.addEventListener('click',()=>{
      const open=menu.classList.toggle('show');
      toggleBtn.setAttribute('aria-expanded',open?'true':'false');
    });

    // fecha o drawer ao clicar em link
    menu.addEventListener('click', (e)=>{
      if(e.target.closest('a')){
        menu.classList.remove('show');
        toggleBtn.setAttribute('aria-expanded','false');
      }
    });

    // accordion Visualiza√ß√µes
    const vizBtn=document.getElementById('viz-toggle');
    const vizSub=document.getElementById('viz-submenu');
    vizBtn.addEventListener('click',()=>{
      const open=vizSub.classList.toggle('show');
      vizBtn.setAttribute('aria-expanded',open?'true':'false');
      vizBtn.parentElement.classList.toggle('open',open);
    });

    // language switcher: /pt/ -> /en/
    document.getElementById('lang-switch').addEventListener('click',(e)=>{
      e.preventDefault();
      const url=new URL(window.location.href);
      const parts=url.pathname.split('/');
      const idx=parts.findIndex(seg=>seg==='pt'||seg==='en');
      if(idx>=0){parts[idx]='en';url.pathname=parts.join('/');}
      else{url.pathname='/en'+url.pathname;}
      window.location.assign(url.toString());
    });

    // logo: home do idioma atual
    document.getElementById('logo-home').addEventListener('click',()=>{
      const url=new URL(window.location.href);
      const parts=url.pathname.split('/');
      const idx=parts.findIndex(seg=>seg==='pt'||seg==='en');
      if(idx>=0){url.pathname='/'+parts[idx]+'/';}
      else{url.pathname='/';}
      window.location.assign(url.toString());
    });
  </script>
</body>
</html>
