<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>DataZoom</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --green:#2f7d32;
      --green-soft:#73C373;
      --border:#e6e6e6;

      /* Ajuste aqui se quiser: */
      --content-max:1200px;   /* largura máxima “como antes” */
      --gutter:24px;          /* respiro lateral */
      --header-h:76px;        /* altura do header (desktop) */
      --logo-h:56px;          /* altura do logo (desktop) */
    }
    @media (max-width: 768px){
      :root{
        --gutter:0px;
        --header-h:64px;
        --logo-h:46px;
      }
    }

    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{text-decoration:none;color:inherit}

    /* ---------- HEADER ---------- */
    .navbar{
      position:sticky; top:0; z-index:1000;
      background:#fff;
      border-bottom:2px solid var(--green-soft) !important;
      min-height:var(--header-h);
      display:flex; align-items:center;
      margin-bottom: 0;
    }
    .navbar .container{
      width:100%;
      max-width:var(--content-max);
      margin:0 auto;
      padding:0 var(--gutter);
      display:flex; align-items:center; justify-content:space-between;
      gap:16px;
    }

    .nav-left{display:flex; align-items:center; min-width:0}
    .logo-btn{border:0; background:transparent; cursor:pointer; padding:0; display:flex; align-items:center}
    .logo-img{height:var(--logo-h); width:auto; display:block}

    .nav-right{margin-left:auto; display:flex; align-items:center; gap:16px}
    .nav-action{display:flex; flex-direction:column; align-items:center; justify-content:center; white-space: nowrap}
    .divider{width:1px; height:24px; background:#d1d5db}

    .lang-link{color:var(--green); font-weight:600}

    /* ---------- HAMBURGER ---------- */
    .menu-toggle{
      border:0; background:transparent; cursor:pointer; padding:0;
      display:flex; flex-direction:column; align-items:center
    }
    .bars{width:26px}
    .bar{height:3px; background:var(--green-soft); border-radius:2px; margin:4px 0}
    .menu-label{font-size:12px; color:#555; margin-top:3px}

    /* ---------- MENU (drawer à direita) ---------- */
    nav{background:#fff}
    .menu{
      list-style:none; margin:0;
      padding:calc(var(--header-h) + 8px) 0 0; /* respeita header */
      position:fixed; right:0; top:0;
      width:min(88vw, 360px); height:100vh;
      background:#fff; border-left:1px solid var(--border);
      display:none; overflow:auto; z-index:999;
    }
    .menu.show{display:block}
    .menu li{border-bottom:1px solid var(--border)}
    .menu a, .menu .menu-link{
      width:100%; display:flex; align-items:center; justify-content:space-between;
      padding:14px 18px; font-weight:700; color:var(--green);
    }
    .menu a:hover, .menu .menu-link:hover{background:#f7faf7}
    .caret{transition:transform .2s}
    .open .caret{transform:rotate(180deg)}
    .submenu{list-style:none; margin:0; padding:0; display:none}
    .submenu.show{display:block}
    .submenu li a{font-weight:600; color:#111; padding:14px 28px}
  </style>
</head>
<body>

<!-- ======= HEADER ======= -->
<header class="navbar" role="banner">
  <div class="container">
    <div class="nav-left">
      <a href="{{ site.baseurl }}/en/" class="logo-btn" id="logo-home" aria-label="Return to main page">
        <img class="logo-img" src="{{ site.baseurl }}/assets/img/banner_dzam.png" alt="DataZoom Amazônia">
      </a>
    </div>

    <div class="nav-right">
      <div class="nav-action">
        <a href="#" id="lang-switch" class="lang-link">Português</a>
      </div>
      <div class="divider" aria-hidden="true"></div>
      <div class="nav-action">
        <button class="menu-toggle" id="menu-toggle" aria-expanded="false" aria-controls="site-menu">
          <div class="bars" aria-hidden="true">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
          </div>
          <span class="menu-label">Menu</span>
        </button>
      </div>
    </div>
  </div>
</header>


  <!-- ======= VERTICAL MENU ======= -->
  <nav aria-label="Menu principal">
    <ul class="menu" id="site-menu">
      <li><a href="{{ site.baseurl }}/en/">Main Page</a></li>
      <li>
        <a href="{{ site.baseurl }}/en/viz/" class="menu-link" id="viz-toggle" aria-expanded="false" aria-controls="viz-submenu">
          <span class="viz-text">Visualizations</span> <span class="caret"></span>
        </a>
        <ul class="submenu" id="viz-submenu">
          <li><a href="{{ site.baseurl }}/en/viz/comercio-exterior/">Foreign Trade</a></li>
          <li><a href="{{ site.baseurl }}/en/viz/desenvolvimento/">Development</a></li>
          <li><a href="{{ site.baseurl }}/en/viz/desmatamento/">Deforestation</a></li>
          <li><a href="{{ site.baseurl }}/en/viz/energia/">Energy</a></li>
          <li><a href="{{ site.baseurl }}/en/viz/mercado-de-trabalho/">Labor Market</a></li>
          <li><a href="{{ site.baseurl }}/en/viz/saude/">Health</a></li>
          <li><a href="{{ site.baseurl }}/en/viz/agropecuaria/">Agribusiness</a></li>
        </ul>
      </li>
      <li><a href="{{ site.baseurl }}/en/codigos-e-dados/">Codes and Data</a></li>
      <li><a href="{{ site.baseurl }}/en/sobre/">About</a></li>
      <li><a href="https://www.econ.puc-rio.br/datazoom/english/index.html">Data Zoom</a></li>
      <li><a href="https://amazonia2030.org.br/project/">Amazon 2030</a></li>
      <li><a href="{{ site.baseurl }}/en/termos/">Terms of Use</a></li>
    </ul>
  </nav>

  <script>
    const toggleBtn = document.getElementById('menu-toggle');
    const menu = document.getElementById('site-menu');
    toggleBtn.addEventListener('click', () => {
      const open = menu.classList.toggle('show');
      toggleBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });

   const vizToggle = document.getElementById('viz-toggle');
vizToggle.addEventListener('click', (e) => {
  const s = document.getElementById('viz-submenu');

  // se clicou exatamente na palavra -> navega (não bloqueia)
  if (e.target.closest('.viz-text')) {
    return; // segue para o href normalmente (/pt/viz/)
  }

  // clicou na setinha ou em qualquer área do link fora da palavra -> abre/fecha submenu
  e.preventDefault();
  const open = s.classList.toggle('show');
  vizToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
  vizToggle.parentElement.classList.toggle('open', open);
});

    document.getElementById('lang-switch').addEventListener('click',(e)=>{
      e.preventDefault();
      const u=new URL(window.location.href);
      const p=u.pathname.split('/');
      const i=p.findIndex(s=>s==='en'||s==='pt');
      if(i>=0){p[i]='pt';u.pathname=p.join('/');}
      else{u.pathname='/pt'+u.pathname;}
      window.location.assign(u.toString());
    });

    document.getElementById('logo-home').addEventListener('click',()=>{
      const u=new URL(window.location.href),p=u.pathname.split('/');
      const i=p.findIndex(s=>s==='en'||s==='pt');
      u.pathname = i>=0 ? ('/'+p[i]+'/') : '/';
      window.location.assign(u.toString());
    });
  </script>
</body>
</html>

